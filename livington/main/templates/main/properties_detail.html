{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% load custom_filters %}
{% block title %}{{ property.title }} in {{ property.district.name }}, {{ property.city.name}} | From {{ property.low_price|intcomma }}
{% endblock %}
{% block meta_description %}Buy {{ property.title }} in {{ property.district.name }}, {{ property.city.name }}. Prices from {{ property.low_price|intcomma }}. 
Premium amenities, modern layouts, and excellent investment potential.
{% endblock %}

{% block content %}

<style>
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes scaleIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .unit-card {
        animation: fadeInUp 0.6s ease-out forwards;
        opacity: 0;
    }

    .unit-card:nth-child(1) { animation-delay: 0.1s; }
    .unit-card:nth-child(2) { animation-delay: 0.2s; }
    .unit-card:nth-child(3) { animation-delay: 0.3s; }
    .unit-card:nth-child(4) { animation-delay: 0.4s; }
    .unit-card:nth-child(5) { animation-delay: 0.5s; }
    .unit-card:nth-child(6) { animation-delay: 0.6s; }

    .amenity-item {
        animation: slideInLeft 0.5s ease-out forwards;
        opacity: 0;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .amenity-item:nth-child(1) { animation-delay: 0.05s; }
    .amenity-item:nth-child(2) { animation-delay: 0.1s; }
    .amenity-item:nth-child(3) { animation-delay: 0.15s; }
    .amenity-item:nth-child(4) { animation-delay: 0.2s; }
    .amenity-item:nth-child(5) { animation-delay: 0.25s; }
    .amenity-item:nth-child(6) { animation-delay: 0.3s; }
    .amenity-item:nth-child(7) { animation-delay: 0.35s; }
    .amenity-item:nth-child(8) { animation-delay: 0.4s; }
    .amenity-item:nth-child(9) { animation-delay: 0.45s; }
    .amenity-item:nth-child(10) { animation-delay: 0.5s; }

    .amenity-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(199, 176, 76, 0.2);
    }

    .unit-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        transition: all 0.3s ease;
    }

    .gallery-item {
        animation: scaleIn 0.6s ease-out forwards;
        opacity: 0;
        transition: transform 0.3s ease;
    }

    .gallery-item:nth-child(1) { animation-delay: 0.1s; }
    .gallery-item:nth-child(2) { animation-delay: 0.2s; }
    .gallery-item:nth-child(3) { animation-delay: 0.3s; }
    .gallery-item:nth-child(4) { animation-delay: 0.4s; }
    .gallery-item:nth-child(5) { animation-delay: 0.5s; }
    .gallery-item:nth-child(6) { animation-delay: 0.6s; }

    .gallery-item:hover {
        transform: scale(1.05);
    }

    .main-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 3rem;
    }

    .sidebar-container {
        position: sticky;
        top: 2rem;
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.06);
    }

    /* Popup Styles */
    .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .popup-overlay.show {
        opacity: 1;
        visibility: visible;
    }

    .popup-modal {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 450px;
        width: 90%;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        transform: scale(0.7);
        transition: transform 0.3s ease;
    }

    .popup-overlay.show .popup-modal {
        transform: scale(1);
    }

    .popup-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 20px;
        background: linear-gradient(135deg, #c7b04c 0%, #d4af37 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: popupScaleIn 0.5s ease;
    }

    @keyframes popupScaleIn {
        0% {
            transform: scale(0);
        }
        50% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
    }

    .popup-icon i {
        font-size: 40px;
        color: white;
    }

    .popup-modal h3 {
        font-size: 1.8rem;
        color: #1e3a5f;
        margin-bottom: 15px;
        font-weight: 700;
    }

    .popup-modal p {
        color: #666;
        font-size: 1rem;
        line-height: 1.6;
        margin-bottom: 25px;
    }

    .popup-close-btn {
        padding: 12px 40px;
        background: linear-gradient(135deg, #c7b04c 0%, #d4af37 100%);
        color: white;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .popup-close-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(199, 176, 76, 0.4);
    }

    /* ============================================
       RESPONSIVE MEDIA QUERIES
       ============================================ */

    /* Laptop/Tablet (max-width: 1199px) */
    @media (max-width: 1199px) {
        .main-grid {
            grid-template-columns: 1fr !important;
            gap: 3rem;
        }

        .sidebar-container {
            position: static !important;
            max-width: 600px;
            margin: 0 auto;
        }
    }

    /* Tablet (max-width: 991px) */
    @media (max-width: 991px) {
        section:first-of-type {
            min-height: 50vh !important;
        }

        section:first-of-type > div {
            padding: 5rem 1.5rem 4rem !important;
        }

        section:first-of-type > div > a {
            top: 1.5rem !important;
            left: 1.5rem !important;
            padding: 0.5rem 1rem !important;
            font-size: 0.9rem !important;
        }

        section:last-of-type {
            padding: 3rem 1.5rem !important;
        }

        .sidebar-container {
            padding: 1.75rem !important;
        }
    }

    /* Mobile (max-width: 767px) */
    @media (max-width: 767px) {
        section:first-of-type {
            min-height: auto !important;
        }

        section:first-of-type > div {
            padding: 3rem 1rem 2rem !important;
        }

        section:first-of-type > div > a {
            position: static !important;
            margin-bottom: 1.5rem !important;
            width: fit-content !important;
        }

        section:first-of-type > div > div:first-child {
            flex-direction: column !important;
            gap: 0.5rem !important;
            text-align: center !important;
        }

        section:first-of-type > div > div:nth-child(3) {
            flex-direction: column !important;
            gap: 1rem !important;
        }

        section:last-of-type {
            padding: 2rem 1rem !important;
        }

        .main-grid {
            gap: 2rem !important;
        }

        h2 {
            font-size: 1.5rem !important;
        }

        .sidebar-container {
            max-width: 100% !important;
            padding: 1.5rem !important;
        }

        .unit-card,
        .amenity-item,
        .gallery-item {
            animation: none !important;
            opacity: 1 !important;
        }

        .unit-card:hover,
        .amenity-item:hover,
        .gallery-item:hover {
            transform: none !important;
        }
    }

    /* Mobile Portrait (max-width: 575px) */
    @media (max-width: 575px) {
        section:first-of-type > div > a {
            font-size: 0.875rem !important;
            padding: 0.5rem 0.875rem !important;
        }

        section:first-of-type > div > div:first-child {
            padding: 0.5rem 0.75rem !important;
            font-size: 0.8rem !important;
        }

        section:first-of-type > div > div:first-child img {
            height: 1.5rem !important;
        }

        section:first-of-type > div > div > h1 {
            font-size: 1.75rem !important;
            margin-bottom: 1rem !important;
        }

        section:first-of-type > div > div > div:nth-child(3) {
            font-size: 0.875rem !important;
            gap: 0.875rem !important;
        }

        section:first-of-type > div > div > div:nth-child(3) i {
            font-size: 1rem !important;
        }

        h2 {
            font-size: 1.35rem !important;
            margin-bottom: 1rem !important;
        }

        h3 {
            font-size: 1.125rem !important;
        }

        p {
            font-size: 0.95rem !important;
            line-height: 1.7 !important;
        }

        .unit-card,
        .amenity-item {
            padding: 1.125rem !important;
        }

        .gallery-item img {
            height: 180px !important;
        }

        .sidebar-container {
            padding: 1.25rem !important;
            border-radius: 16px !important;
        }

        .sidebar-container a,
        .sidebar-container button {
            padding: 0.875rem !important;
            font-size: 0.95rem !important;
        }

        .sidebar-container input,
        .sidebar-container textarea {
            padding: 0.75rem !important;
            font-size: 0.95rem !important;
        }

        iframe {
            height: 300px !important;
        }
    }

    /* Extra Small Mobile (max-width: 375px) */
    @media (max-width: 375px) {
        section:first-of-type > div {
            padding: 2.5rem 0.875rem 1.5rem !important;
        }

        section:first-of-type > div > div > h1 {
            font-size: 1.5rem !important;
        }

        section:first-of-type > div > div > div:nth-child(3) {
            font-size: 0.813rem !important;
        }

        h2 {
            font-size: 1.25rem !important;
        }

        .unit-card,
        .amenity-item {
            padding: 1rem !important;
        }

        .gallery-item img {
            height: 160px !important;
        }

        .sidebar-container {
            padding: 1rem !important;
        }

        .sidebar-container a,
        .sidebar-container button {
            padding: 0.75rem !important;
            font-size: 0.875rem !important;
        }

        .sidebar-container input,
        .sidebar-container textarea {
            padding: 0.625rem !important;
            font-size: 0.875rem !important;
        }
    }
 .seo-content {
        position: absolute;
        left: -9999px;
        width: 1px;
        height: 1px;
        overflow: hidden;
    }    
</style>

<!-- HERO SECTION -->
<section style="position: relative; min-height: 60vh; overflow: hidden; background: #f8fafc;">
    {% if property.cover %}
    <img src="{{ property.cover }}" alt="{{ property.title }}" title="{{ property.title }}" style="position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.25;">
    {% endif %}
    
    <div style="position: relative; max-width: 1400px; margin: 0 auto; padding: 5.5rem 2rem 2rem; display: flex; flex-direction: column; justify-content: center;">
        
        <!-- Back Button -->
        <a href="{% url 'main:properties' %}" style="position: absolute; top: 2rem; left: 2rem; display: inline-flex; align-items: center; gap: 0.5rem; background: white; padding: 0.625rem 1.25rem; border-radius: 10px; text-decoration: none; color: #1e293b; font-weight: 600; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <i class="fas fa-arrow-left"></i> Back
        </a>

        <div style="max-width: 1000px;">
            <!-- Property Name -->
            <h1 style="font-size: clamp(2.5rem, 5vw, 3.75rem); font-weight: 700; color: #1e293b; margin-bottom: 1.5rem; line-height: 1.1;">{{ property.title }}</h1>

             <!-- Developer Badge -->
            <div style="display: inline-flex; align-items: center; gap: 0.75rem; background: white; padding: 0.5rem 1rem; border-radius: 10px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                {% if property.developer.logo %}
                <img src="{{ property.developer.logo }}" alt="{{ property.developer.name }}" title="{{ property.developer.name }}" style="height: 3rem; object-fit: contain;">
                {% endif %}
                <span style="font-size: 0.875rem; color: #64748b; font-weight: 500;">by {{ property.developer.name }}</span>
            </div>

            <!-- Property Info -->
            <div style="display: flex; flex-wrap: wrap; gap: 1.75rem; color: #64748b; margin-bottom: 1.5rem; font-size: 1rem;">
                <span style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-map-marker-alt" style="color: #806a0d; font-size: 1.125rem;"></i> 
                    <span style="font-weight: 500;">{{ property.district.name }}, {{ property.city.name }}</span>
                </span>
               <span style="display: flex; align-items: center; gap: 0.5rem;">
    <i class="fas fa-bed" style="color: #806a0d; font-size: 1.125rem;"></i>
    <span style="font-weight: 500;">
        {% for bedroom_count in units_by_bedroom.keys %}
            {{ bedroom_count }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
        Bedroom{% if units_by_bedroom|length > 1 %}s{% endif %}
    </span>
</span>
                <span style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-expand-arrows-alt" style="color: #806a0d; font-size: 1.125rem;"></i> 
                    <span style="font-weight: 500;">{{ property.min_area }} sqft</span>
                </span>
            </div>

            <!-- Price -->
            <div style="font-size: clamp(2rem, 4vw, 3rem); font-weight: 700; color: #806a0d;">AED {{ property.low_price|floatformat:0|intcomma }}</div>
        </div>
    </div>
</section>

<!-- CONTENT SECTION -->
<section style="padding: 2rem 2rem; background: #f8fafc;">
    <div style="max-width: 1400px; margin: 0 auto;">

        <div class="main-grid">

            <!-- LEFT COLUMN -->
            <div style="display: flex; flex-direction: column; gap: 3rem;">

                <!-- ABOUT SECTION -->
                <div>
                    <h2 style="font-size: 1.875rem; font-weight: 700; color: #0f172a; margin-bottom: 1rem;">About This Property</h2>
                    <p style="color: #64748b; font-size: 1.125rem; line-height: 1.9;">
                        {{  clean_description|striptags   }}
                    </p>
                </div>

                <!-- UNIT DETAILS -->
                {% if property.grouped_apartments.all %}
                <div>
                    <h2 style="font-size: 1.875rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem;">Unit Details</h2>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.25rem;">
                        {% for unit in units.all %}
                        <div class="unit-card" style="padding: 1.75rem; background: #fff; border: 1px solid #e2e8f0;
                                    border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); cursor: pointer;">
                            <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">
                                {{ unit.unit_type }}
                            </h3>

                            <div style="color: #475569; font-size: 1rem; display: flex; flex-direction: column; gap: .5rem;">
                                <p><strong>{{ unit.rooms }}</strong> Rooms</p>
                                <p><strong>{{ unit.min_area }}</strong> sqft</p>
                                <p style="margin-top: .75rem; font-size: 1.125rem; color: #c7b04c; font-weight: 700;">
                                    AED {{ unit.min_price|floatformat:0|intcomma }}
                                </p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- AMENITIES -->
                {% if property.facilities.all %}
                <div>
                    <h2 style="font-size: 1.875rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem;">Amenities</h2>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: 1rem;">
                        {% for amenity in property.facilities.all %}
                        <div class="amenity-item" style="padding: 1rem; background: #fff; border: 1px solid #e2e8f0;
                                    border-radius: 12px; display: flex; align-items: center; gap: 1rem; cursor: pointer;">
                            <div style="padding: 0.75rem; background: rgba(199, 176, 76, 0.15); border-radius: 10px; transition: all 0.3s ease;">
                                <i class="{{ amenity.name|facility_icon }}" style="color: #c7b04c; font-size: 1.25rem;"></i>
                            </div>
                            <span style="font-weight: 600; color: #0f172a;">{{ amenity.name }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- GALLERY -->
                {% if property.property_images.all %}
                <div>
                    <h2 style="font-size: 1.875rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem;">Gallery</h2>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                        {% for image in images.all %}
                        <div class="gallery-item" style="border-radius: 16px; overflow: hidden; box-shadow: 0 4px 16px rgba(0,0,0,0.1); cursor: pointer;">
                            <img src="{{ image.image }}" alt="{{ property.title}}" title="{{ property.title}}" style="width: 100%; height: 220px; object-fit: cover;">
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- LOCATION MAP -->
                <div>
                    <h2 style="font-size: 1.875rem; font-weight: 700; color: #0f172a; margin-bottom: 1.5rem;">Location</h2>

                    <div style="border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.12);">
                    {% if lat and lng %}
                    <iframe width="100%" height="450" style="border:0" loading="lazy" allowfullscreen
                        src="https://maps.google.com/maps?q={{ lat }},{{ lng }}&hl=en&z=15&output=embed">
                    </iframe>
                    {% else %}
                    <p>Map not available</p>
                    {% endif %}
                    </div>
                </div>
            </div>

            <!-- RIGHT SIDEBAR (CONTACT FORM) -->
            <div>
                <div class="sidebar-container">

                    <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Contact Us</h3>
                    <p style="font-size: .95rem; color: #64748b; margin-bottom: 1.5rem;">
                        Interested in this property? Contact us now!
                    </p>

                    <!-- Buttons -->
                    <a href="tel:+971501234567" style="display: block; background:#1e3a5f; 
                       color:white; padding: 1rem; border-radius: 12px; text-align:center;
                       margin-bottom: 1rem; font-weight:600; text-decoration:none; transition: all 0.3s ease;">
                       <i class="fas fa-phone-alt"></i> Call Now
                    </a>

                    <a href="https://wa.me/971555478352" target="_blank"
                       style="display: block; background:#c7b04c; color:white; padding: 1rem;
                       border-radius: 12px; text-align:center; margin-bottom:1rem;
                       font-weight:600; text-decoration:none; transition: all 0.3s ease;">
                       <i class="fab fa-whatsapp"></i> WhatsApp
                    </a>

                    <!-- Contact Form -->
                    <form id="propertyContactForm" style="margin-top:2rem; display:flex; flex-direction:column; gap:1rem;">
                        <input type="text" name="name" placeholder="Name" required
                               style="padding:0.875rem; border:1px solid #e2e8f0; border-radius:10px; transition: border-color 0.3s ease; width: 100%; box-sizing: border-box;"
                               onfocus="this.style.borderColor='#c7b04c'"
                               onblur="this.style.borderColor='#e2e8f0'">
                        <input type="email" name="email" placeholder="Email" required
                               style="padding:0.875rem; border:1px solid #e2e8f0; border-radius:10px; transition: border-color 0.3s ease; width: 100%; box-sizing: border-box;"
                               onfocus="this.style.borderColor='#c7b04c'"
                               onblur="this.style.borderColor='#e2e8f0'">
                        <input type="tel" name="phone" placeholder="Phone" required
                               style="padding:0.875rem; border:1px solid #e2e8f0; border-radius:10px; transition: border-color 0.3s ease; width: 100%; box-sizing: border-box;"
                               onfocus="this.style.borderColor='#c7b04c'"
                               onblur="this.style.borderColor='#e2e8f0'">
                        <textarea name="message" rows="4" placeholder="Message..."
                                  style="padding:0.875rem; border:1px solid #e2e8f0; border-radius:10px; transition: border-color 0.3s ease; width: 100%; box-sizing: border-box; resize: vertical;"
                                  onfocus="this.style.borderColor='#c7b04c'"
                                  onblur="this.style.borderColor='#e2e8f0'"></textarea>

                        <button type="submit" class="submit-btn"
                                style="background:#1e3a5f; color:white; padding:1rem; width: 100%;
                                       border:none; border-radius:12px; font-weight:600; cursor: pointer; transition: all 0.3s ease;"
                                onmouseover="this.style.background='#152a47'; this.style.transform='translateY(-2px)'"
                                onmouseout="this.style.background='#1e3a5f'; this.style.transform='translateY(0)'">
                            Submit
                        </button>
                    </form>

                </div>
            </div>

        </div>

    </div>
</section>
 <div class="seo-content">
        <section>
            <h2>Dubai's Most Trusted Property Developers</h2>
            
            <p>
                BuyOffPlanUAE.com connects you with Dubai's premier property developers who are shaping the emirate's skyline with innovative and luxurious residential and commercial projects. Our curated selection of verified developers represents the pinnacle of quality, reliability, and excellence in Dubai's dynamic real estate market. Each developer on our platform has been carefully vetted to ensure they meet the highest standards of construction quality, timely delivery, and customer satisfaction.
            </p>
            
            <p>
                These leading developers bring decades of combined experience in creating world-class communities that blend modern architecture with cutting-edge amenities. From waterfront residences and luxury penthouses to family-friendly villas and smart apartments, our developer partners offer diverse portfolios catering to every lifestyle and investment goal. Whether you're a first-time homebuyer, seasoned investor, or looking for your dream luxury residence, you'll find properties from award-winning developers known for their commitment to excellence and innovation.
            </p>
            
            <p>
                Dubai's real estate landscape continues to attract global attention, and our partner developers are at the forefront of this growth. They deliver not just properties, but complete lifestyle solutions with integrated communities featuring retail outlets, educational facilities, healthcare centers, and recreational spaces. With flexible payment plans, attractive off-plan prices, and guaranteed returns on investment, these developers make property ownership in Dubai accessible and rewarding for buyers from around the world.
            </p>
        </section>

        <section>
            <h2>Why Choose Developers from BuyOffPlanUAE.com</h2>
            
            <h3>Verified & Trusted</h3>
            <p>Every developer on our platform undergoes rigorous verification to ensure they meet international standards of quality, transparency, and financial stability. We partner only with developers who have proven track records of successful project delivery and satisfied customers.</p>

            <h3>Award-Winning Projects</h3>
            <p>Our developer partners have received numerous industry accolades for architectural excellence, sustainable design, and innovative community planning. Their projects set benchmarks in quality construction, modern amenities, and value for money across various price segments.</p>

            <h3>Transparent Dealings</h3>
            <p>All developers maintain complete transparency in their operations, pricing, and payment schedules. You'll receive clear documentation, regular project updates, and direct access to developer representatives who can address your questions and concerns promptly.</p>

            <h3>Timely Delivery</h3>
            <p>Our partner developers have established reputations for delivering projects on schedule or ahead of time. Their commitment to meeting deadlines ensures your investment timelines remain predictable and your property handover happens as planned without unnecessary delays.</p>

            <h3>Strong Investment Returns</h3>
            <p>Properties from our featured developers consistently deliver excellent capital appreciation and rental yields. Strategic locations, quality construction, and desirable amenities ensure your investment grows in value while generating attractive passive income opportunities.</p>

            <h3>Customer-Centric Approach</h3>
            <p>These developers prioritize customer satisfaction throughout the buying journey. From initial consultation and property selection to post-handover support, you'll experience professional service, clear communication, and dedicated assistance at every stage of your property purchase.</p>
        </section>

        <section>
            <h2>Investment Opportunities with Leading Dubai Developers</h2>
            
            <p>
                Investing in properties from established Dubai developers offers numerous advantages that extend beyond simple property ownership. These developers create comprehensive communities that appreciate in value faster than standard residential developments. Their projects are strategically located in high-growth areas with excellent connectivity to business districts, shopping centers, educational institutions, and entertainment venues, ensuring sustained demand from both buyers and renters.
            </p>
            
            <p>
                Off-plan properties from reputable developers provide significant financial benefits including flexible payment plans that allow you to spread payments over the construction period, often requiring just 10-20% down payment. Early investors typically benefit from pre-launch and construction-phase pricing that can be 20-30% below market rates upon completion. Additionally, many developers offer attractive rental guarantee programs, buyback options, and post-handover payment plans that make investing more accessible and less financially burdensome.
            </p>
            
            <p>
                The Dubai property market continues to attract international investors due to favorable regulations, tax-free environment, and strong rental yields averaging 6-9% annually. Properties from premium developers command higher rental rates and maintain better occupancy levels, ensuring steady cash flow for investors. With visa opportunities linked to property ownership, freehold ownership rights for foreign investors, and the emirate's position as a global business hub, investing in properties from our featured developers represents a strategic entry into one of the world's most dynamic real estate markets.
            </p>
        </section>

        <section>
            <h2>Frequently Asked Questions About Dubai Developers</h2>
            
            <h3>How do I choose the right developer for my investment?</h3>
            <p>Choose developers based on their track record of completed projects, delivery timelines, financial stability, and customer reviews. Look for developers with established reputations in your preferred location and property type. Our platform provides comprehensive information about each developer's portfolio, helping you make informed decisions based on quality, location, and investment potential.</p>

            <h3>What payment plans do developers typically offer?</h3>
            <p>Dubai developers offer various payment structures including construction-linked plans (pay percentages at specific construction milestones), post-handover plans (extend payments 1-5 years after completion), and flexible installment options. Down payments typically range from 10-30%, with the balance spread over the construction period and sometimes beyond handover, making property ownership more accessible.</p>

            <h3>Are properties from established developers better investments?</h3>
            <p>Properties from reputable developers generally offer better investment security, higher resale values, and stronger rental demand. Established developers have proven construction quality, timely delivery records, and prime locations that attract discerning buyers and tenants. Their projects tend to appreciate faster and maintain value better during market fluctuations compared to properties from less established developers.</p>

            <h3>Can foreign investors buy properties from these developers?</h3>
            <p>Yes, foreign investors can purchase properties in designated freehold areas across Dubai without restrictions. Our featured developers primarily build in freehold zones, allowing international buyers full ownership rights. Some developers also offer assistance with residency visa applications linked to property purchases, making Dubai property ownership attractive for foreign investors seeking both investment returns and lifestyle benefits.</p>

            <h3>What happens if a developer delays project completion?</h3>
            <p>Dubai's Real Estate Regulatory Authority (RERA) protects buyers through strict regulations governing developer conduct and project timelines. Reputable developers maintain insurance and provide compensation for significant delays. Our featured developers have strong delivery records, but in rare cases of delays, buyers typically receive extensions on payment deadlines or compensation as outlined in purchase agreements and regulated by Dubai Land Department.</p>
        </section>
    </div>
<!-- Success Popup Modal -->
<div class="popup-overlay" id="propertyPopupOverlay">
    <div class="popup-modal">
        <div class="popup-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3>Message Sent Successfully!</h3>
        <p>Thank you for your interest in this property. Our team will review your inquiry and get back to you within 24 hours.</p>
        <button class="popup-close-btn" onclick="closePropertyPopup()">Got it!</button>
    </div>
</div>

<script>
const WEB3FORMS_ACCESS_KEY = '';

// Property Contact Form Submission
document.getElementById('propertyContactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = form.querySelector('.submit-btn');
    const originalHTML = submitBtn.innerHTML;
    
    // Get form values
    const formData = new FormData();
    formData.append('access_key', WEB3FORMS_ACCESS_KEY);
    formData.append('name', form.name.value);
    formData.append('email', form.email.value);
    formData.append('phone', form.phone.value);
    formData.append('message', form.message.value);
    formData.append('subject', 'Property Inquiry - {{ property.title }}');
    formData.append('from_name', 'OffPlanUAE.AI Property Inquiry');
    
    // Add property details to message
    const propertyDetails = `
Property: {{ property.title }}
Location: {{ property.district.name }}, {{ property.city.name }}
Price: AED {{ property.low_price|floatformat:0|intcomma }}

Customer Message:
${form.message.value}
    `;
    formData.set('message', propertyDetails);
    
    // Disable button and show loading
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    
    try {
        // Send to Web3Forms
        const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Show success popup
            showPropertyPopup();
            
            // Reset form
            form.reset();
        } else {
            throw new Error(result.message || 'Submission failed');
        }
        
    } catch (error) {
        console.error('Error:', error);
        alert('Sorry, there was an error sending your message. Please try again later.');
    } finally {
        // Re-enable button and restore original text
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalHTML;
    }
});

// Show Popup
function showPropertyPopup() {
    const popup = document.getElementById('propertyPopupOverlay');
    popup.classList.add('show');
    document.body.style.overflow = 'hidden';
}

// Close Popup
function closePropertyPopup() {
    const popup = document.getElementById('propertyPopupOverlay');
    popup.classList.remove('show');
    document.body.style.overflow = '';
}

// Close popup when clicking outside
document.getElementById('propertyPopupOverlay').addEventListener('click', function(e) {
    if (e.target === this) {
        closePropertyPopup();
    }
});

// Close popup with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closePropertyPopup();
    }
});
</script>
{% endblock %}